name: Ghost Monitor Loop

on:
  push:
    branches: [ main ]
  schedule:
    - cron: '0 */6 * * *' # –ê–≤—Ç–æ-—Ä–µ—Å—Ç–∞—Ä—Ç –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤
  workflow_dispatch: # –ö–Ω–æ–ø–∫–∞ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

jobs:
  run-ghost:
    runs-on: ubuntu-latest
    timeout-minutes: 350 # –õ–∏–º–∏—Ç GitHub (–ø–æ—á—Ç–∏ 6 —á–∞—Å–æ–≤)

    steps:
      - name: Checkout Code
        uses: actions/checkout@v3

      - name: Install Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: Install Dependencies
        run: |
          python -m pip install --upgrade pip
          pip install telethon requests

      - name: Execute Engine
        env:
          TG_API_ID: ${{ secrets.TG_API_ID }}
          TG_API_HASH: ${{ secrets.TG_API_HASH }}
        # –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è '|| true' –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —à–∞–≥ –Ω–µ –ø–æ–º–µ—Ç–∏—Ç—Å—è –∫—Ä–µ—Å—Ç–æ–º –ø—Ä–∏ –ø–ª–∞–Ω–æ–≤–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–µ
        run: |
          echo "üöÄ Starting Ghost System..."
          python main.py || true
